{"id":"errors/NG0503","title":"NG0503: During serialization, Angular detected DOM nodes that were created outside of Angular's context and used for content projection.\n\n在序列化期间，Angular 检测了 DOM 节点，这些节点是在 Angular 上下文之外创建的，并被用来做内容投影。","contents":"<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/errors/NG0503.md?message=docs(...)%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n<div class=\"content\">\n\n  <h1 id=\"ng0503-during-serialization-angular-detected-dom-nodes-that-were-created-outside-of-angulars-context-and-used-for-content-projection在序列化期间angular-检测了-dom-节点这些节点是在-angular-上下文之外创建的并被用来做内容投影\">NG0503: During serialization, Angular detected DOM nodes that were created outside of Angular's context and used for content projection.\n\n在序列化期间，Angular 检测了 DOM 节点，这些节点是在 Angular 上下文之外创建的，并被用来做内容投影。<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#ng0503-during-serialization-angular-detected-dom-nodes-that-were-created-outside-of-angulars-context-and-used-for-content-projection在序列化期间angular-检测了-dom-节点这些节点是在-angular-上下文之外创建的并被用来做内容投影\"><i class=\"material-icons\">link</i></a></h1>\n\n  \n  \n\n  <div class=\"error-description\">\n    <h2 translation-result=\"on\" id=\"说明\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#说明\"><i class=\"material-icons\">link</i></a></h2>\n    <h2 translation-origin=\"off\" id=\"description\">Description<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p translation-result=\"on\">这个错误意味着在服务端序列化过程中，Angular 遇到了在 Angular 上下文之外创建的节点（即使用原生 DOM API 创建的），并发现这些节点是作为可投影节点提供的。它们可能是使用 <code>ViewContainerRef.createComponent</code> 或 <code><a href=\"api/core/createComponent\" class=\"code-anchor\">createComponent</a></code> API 提供的。Angular 水合不支持这种用法。</p><p translation-origin=\"off\">This error means that during the server side serialization process, Angular encountered nodes that were created outside of Angular's context (i.e. using native DOM APIs) and found those nodes were provided as projectible nodes. They were likely provided using <code>ViewContainerRef.createComponent</code> or <code><a href=\"api/core/createComponent\" class=\"code-anchor\">createComponent</a></code> APIs. Angular hydration does not support this use case.</p>\n\n<p translation-result=\"on\">有关水合的更多信息，请参阅<a href=\"guide/hydration\">本指南</a>。</p><p translation-origin=\"off\">More information about hydration can be found in <a href=\"guide/hydration\">this guide</a>.</p>\n\n<p translation-result=\"on\">以下示例将触发错误。</p><p translation-origin=\"off\">The following examples will trigger the error.</p>\n\n<code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  selector: 'dynamic',\n  template: `\n  &lt;ng-content /&gt;\n`,\n})\nclass DynamicComponent {\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  selector: 'app',\n  template: `&lt;div #target&gt;&lt;/div&gt;`,\n})\nclass SimpleComponent {\n  @<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('target', {read: <a href=\"api/core/ViewContainerRef\" class=\"code-anchor\">ViewContainerRef</a>}) vcr!: <a href=\"api/core/ViewContainerRef\" class=\"code-anchor\">ViewContainerRef</a>;\n  envInjector = inject(<a href=\"api/core/EnvironmentInjector\" class=\"code-anchor\">EnvironmentInjector</a>);\n\n  ngAfterViewInit() {\n    const div = document.createElement('div');\n    const p = document.createElement('p');\n    // In this test we create DOM nodes outside of Angular context\n    // (i.e. not using Angular APIs) and try to content-project them.\n    // This is an unsupported <a href=\"api/forms/PatternValidator\" class=\"code-anchor\">pattern</a> and an exception will be thrown.\n    const compRef = <a href=\"api/core/createComponent\" class=\"code-anchor\">createComponent</a>(DynamicComponent, {\n      environmentInjector: this.envInjector,\n      projectableNodes: [[div, p]]\n    });\n  }\n}\n</code-example>\n\n  </div>\n\n\n  \n  <br>\n\n  <div class=\"debugging\">\n    <h2 translation-result=\"on\" id=\"如何排除本错误\">如何排除本错误<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#如何排除本错误\"><i class=\"material-icons\">link</i></a></h2>\n    <h2 translation-origin=\"off\" id=\"debugging-the-error\">Debugging the error<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#debugging-the-error\"><i class=\"material-icons\">link</i></a></h2>\n    <p translation-result=\"on\">开发人员控制台中的错误消息应包含有关导致问题的应用程序 DOM 结构的特定部分的信息。检查应用程序的那部分是否存在与水合相关的错误，例如使用原生 API 的直接 DOM 操作。</p><p translation-origin=\"off\">The error message in the developer console should contain information on a specific part of the application's DOM structure that is causing the problem. Review that part of the application for hydration-related errors, such as direct DOM manipulation using native APIs.</p>\n\n<p translation-result=\"on\">可能的解决方案之一是，你可以将 <code>ngSkipHydration</code> 属性添加到你的组件宿主节点。</p><p translation-origin=\"off\">You can add the <code>ngSkipHydration</code> attribute to your component host node as a possible workaround.</p>\n\n\n  </div>\n  \n</div>\n\n<!-- links to this doc:\n - errors\n-->\n<!-- links from this doc:\n - api/core/Component\n - api/core/EnvironmentInjector\n - api/core/ViewChild\n - api/core/ViewContainerRef\n - api/core/createComponent\n - api/forms/PatternValidator\n - errors/NG0503#debugging-the-error\n - errors/NG0503#description\n - errors/NG0503#ng0503-during-serialization-angular-detected-dom-nodes-that-were-created-outside-of-angulars-context-and-used-for-content-projection在序列化期间angular-检测了-dom-节点这些节点是在-angular-上下文之外创建的并被用来做内容投影\n - errors/NG0503#如何排除本错误\n - errors/NG0503#说明\n - guide/hydration\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/errors/NG0503.md?message=docs(...)%3A%20请简述你的修改...\n-->"}