{"id":"guide/animations-attach-to-html-template","title":"Define animations and attach to an HTML template","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/animations-attach-to-html-template.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"define-animations-and-attach-to-an-html-template\" translation-result=\"on\">定义动画并附加到 HTML 模板<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#define-animations-and-attach-to-an-html-template\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Define animations and attach to an HTML template<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#define-animations-and-attach-to-an-html-template\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">动画是在控制要动画的 HTML 元素的宿主组件的元数据中定义的。</p><p translation-origin=\"off\">Animations are defined in the metadata of the component that controls the HTML element to be animated.</p>\n\n<h2 id=\"define-the-animation\" translation-result=\"on\">定义动画。<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#define-the-animation\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Define the animation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#define-the-animation\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">将定义动画的代码放在 <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> 装饰器中的 <code>animations:</code> 属性下。</p><p translation-origin=\"off\">Put the code that defines your animations under the <code>animations:</code> property within the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> decorator.</p>\n\n<code-example header=\"src/app/open-close.component.ts\" path=\"animations/src/app/open-close.component.ts\" region=\"component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-open-close',\n  animations: [\n    <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n      // ...\n      state('open', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n        height: '200px',\n        opacity: 1,\n        backgroundColor: 'yellow'\n      })),\n      state('closed', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n        height: '100px',\n        opacity: 0.8,\n        backgroundColor: 'blue'\n      })),\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open =&gt; closed', [\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n      ]),\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('closed =&gt; open', [\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n      ]),\n    ]),\n  ],\n  templateUrl: 'open-close.component.html',\n  styleUrls: ['open-close.component.css']\n})\nexport class OpenCloseComponent {\n  isOpen = true;\n\n  toggle() {\n    this.isOpen = !this.isOpen;\n  }\n\n}\n\n</code-example>\n<p translation-result=\"on\">定义了组件的动画触发器后，将其附加到模板中的元素。将触发器名称括在方括号中，并在它前面加上 <code>@</code> 符号。可以使用标准的 Angular 属性绑定语法将触发器绑定到模板表达式。其中 <code>triggerName</code> 是触发器的名称，<code>expression</code> 计算为某个已定义的动画状态。</p><p translation-origin=\"off\">When an animation trigger for a component is defined, attach it to an element in the template. Wrap the trigger name in brackets and precede it with an <code>@</code> symbol.\nBind the trigger to a template expression using standard Angular property binding syntax. The <code>triggerName</code> is the name of the trigger, and <code>expression</code> evaluates to a defined animation state.</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;div [@triggerName]=\"expression\"&gt;…&lt;/div&gt;;\n\n</code-example>\n<p translation-result=\"on\">当该表达式的值变成了新的状态时，动画就会执行或者叫触发。</p><p translation-origin=\"off\">The animation is executed or triggered when the expression value changes to a new state.</p>\n\n<p translation-result=\"on\">下列代码片段把该触发器绑定到了 <code>isOpen</code> 属性的值上。</p><p translation-origin=\"off\">The following code snippet binds the trigger to the value of the <code>isOpen</code> property.</p>\n\n<code-example header=\"src/app/open-close.component.html\" path=\"animations/src/app/open-close.component.1.html\" region=\"trigger\">\n&lt;nav&gt;\n  &lt;button type=\"button\" (click)=\"toggle()\"&gt;Toggle Open/Close&lt;/button&gt;\n&lt;/nav&gt;\n\n&lt;div [@openClose]=\"isOpen ? 'open' : 'closed'\" class=\"open-close-container\"&gt;\n  &lt;p&gt;The box is now {{ isOpen ? 'Open' : 'Closed' }}!&lt;/p&gt;\n&lt;/div&gt;\n\n</code-example>\n<p translation-result=\"on\">在这个例子中，当 <code>isOpen</code> 表达式求值为一个已定义状态 <code>open</code> 或 <code>closed</code> 时，就会通知 <code>openClose</code> 触发器说状态变化了。然后，就由 <code>openClose</code> 中的代码来处理状态变更，并启动状态变更动画。</p><p translation-origin=\"off\">In this example, when the <code>isOpen</code> expression evaluates to a defined state of <code>open</code> or <code>closed</code>, it notifies the trigger <code>openClose</code> of a state change.\nThen it's up to the <code>openClose</code> code to handle the state change and kick off a state change animation.</p>\n\n<p translation-result=\"on\">对于那些进入或离开页面的元素（插入到 DOM 中或从中移除），你可以让动画变成有条件的。比如，在 HTML 模板中可以和 <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> 一起使用动画触发器。</p><p translation-origin=\"off\">For elements entering or leaving a page (inserted or removed from the DOM), you can make the animations conditional.\nFor example, use <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> with the animation trigger in the HTML template.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">注意：<br>\n在组件文件中，将定义动画的触发器设置为 <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> 装饰器中 <code>animations:</code> 属性的值。</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nIn the component file, set the trigger that defines the animations as the value of the <code>animations:</code> property in the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> decorator.</p>\n\n<h2 id=\"attach-an-animation-to-an-html-template\" translation-result=\"on\">将动画附加到 HTML 模板<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#attach-an-animation-to-an-html-template\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Attach an animation to an HTML template<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#attach-an-animation-to-an-html-template\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在 HTML 模板文件中，使用触发器名称把已定义的动画附着到要执行动画的 HTML 元素上。</p><p translation-origin=\"off\">In the HTML template file, use the trigger name to attach the defined animations to the HTML element to be animated.</p>\n\n</div>\n\n  <div class=\"reviewed\">最后复查时间：10/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/animations/animate\n - api/animations/style\n - api/animations/transition\n - api/animations/trigger\n - api/common/NgIf\n - api/core/Component\n - guide/animations-attach-to-html-template#attach-an-animation-to-an-html-template\n - guide/animations-attach-to-html-template#define-animations-and-attach-to-an-html-template\n - guide/animations-attach-to-html-template#define-the-animation\n - guide/animations-attach-to-html-template#定义动画\n - guide/animations-attach-to-html-template#定义动画并附加到-html-模板\n - guide/animations-attach-to-html-template#将动画附加到-html-模板\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/animations-attach-to-html-template.md?message=docs%3A%20请简述你的修改...\n-->"}