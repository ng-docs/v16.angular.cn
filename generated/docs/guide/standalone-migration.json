{"id":"guide/standalone-migration","title":"Migrate an existing Angular project to standalone","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/standalone-migration.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"migrate-an-existing-angular-project-to-standalone\" translation-result=\"on\">将现有的 Angular 项目迁移到独立项目<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#migrate-an-existing-angular-project-to-standalone\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Migrate an existing Angular project to standalone<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#migrate-an-existing-angular-project-to-standalone\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">从版本 15.2.0 开始，Angular 提供了一个<a href=\"guide/schematics\">原理图</a>来帮助项目作者将现有项目转换为<a href=\"guide/standalone-components\">新的独立 API</a>。该原理图旨在自动转换尽可能多的代码，但可能需要项目作者进行一些手动修复。使用以下命令运行原理图：</p><p translation-origin=\"off\">As of version 15.2.0, Angular offers a <a href=\"guide/schematics\">schematic</a> to help project authors convert existing projects to <a href=\"guide/standalone-components\">the new standalone APIs</a>. The schematic aims to transform as much code as possible automatically, but it may require some manual fixes by the project author. Run the schematic with the following command:</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nng generate @angular/core:standalone\n\n</code-example>\n<h2 id=\"prerequisites\" translation-result=\"on\">前提条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在使用本原理图之前，请确保项目：</p><p translation-origin=\"off\">Before using the schematic, please ensure that the project:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">使用的是 Angular 15.2.0 或更高版本。</p><p translation-origin=\"off\">Is using Angular 15.2.0 or later.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">构建没有任何编译错误。</p><p translation-origin=\"off\">Builds without any compilation errors.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在干净的 Git 分支上，所有工作都已保存。</p><p translation-origin=\"off\">Is on a clean Git branch and all work is saved.</p>\n\n</li>\n</ol>\n<h2 id=\"schematic-options\" translation-result=\"on\">原理图选项<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#schematic-options\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Schematic options<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#schematic-options\"><i class=\"material-icons\">link</i></a></h2>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">选项</nt-wrapper><nt-wrapper translation-origin=\"off\">Option</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">详情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>mode</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">要执行的转换。有关可用选项的详细信息，请参阅下面的<a href=\"guide/standalone-migration#migration-modes\">迁移模式</a>。</nt-wrapper><nt-wrapper translation-origin=\"off\">The transformation to perform. See <a href=\"guide/standalone-migration#migration-modes\">Migration modes</a> below for details on the available options.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>path</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">相对于项目根目录的迁移路径。你可以使用此选项以增量方式迁移项目的各个部分。</nt-wrapper><nt-wrapper translation-origin=\"off\">The path to migrate, relative to the project root. You can use this option to migrate sections of your project incrementally.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<h2 id=\"migrations-steps\" translation-result=\"on\">迁移步骤<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#migrations-steps\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Migrations steps<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#migrations-steps\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">迁移过程由三个步骤组成。你必须多次运行它并手动检查项目是否能按预期构建和运行。</p><p translation-origin=\"off\">The migration process is composed of three steps. You'll have to run it multiple times and check manually that the project builds and behaves as expected.</p>\n\n<div class=\"callout is-helpful\">\n<header ng-should-translate=\"\" translation-result=\"on\">注意</header><header ng-should-translate=\"\" translation-origin=\"off\">Note</header>\n\n<p translation-result=\"on\">虽然脚手架可以自动更新大部分代码，但有些极端情况还是需要开发人员进行干预。你应该为在每个迁移步骤之后进行手动修复做好准备。此外，脚手架生成的新代码也可能与你的代码格式规则不匹配。</p><p translation-origin=\"off\">While the schematic can automatically update most code, some edge cases require developer intervention.\nYou should plan to apply manual fixes after each step of the migration. Additionally, the new code generated by the schematic may not match your code's formatting rules.</p>\n\n</div>\n<p translation-result=\"on\">按照下面列出的顺序运行迁移，验证你的代码在每个步骤之间构建和运行：</p><p translation-origin=\"off\">Run the migration in the order listed below, verifying that your code builds and runs between each step:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">运行 <code>ng g @angular/core:standalone</code> 并选择 “Convert all components, directives and pipes to standalone”</p><p translation-origin=\"off\">Run <code>ng g @angular/core:standalone</code> and select \"Convert all components, directives and pipes to standalone\"</p>\n\n</li>\n<li>\n<p translation-result=\"on\">运行 <code>ng g @angular/core:standalone</code> 并选择 “Remove unnecessary NgModule classes”</p><p translation-origin=\"off\">Run <code>ng g @angular/core:standalone</code> and select \"Remove unnecessary NgModule classes\"</p>\n\n</li>\n<li>\n<p translation-result=\"on\">运行 <code>ng g @angular/core:standalone</code> 并选择 “Bootstrap the project using standalone APIs”</p><p translation-origin=\"off\">Run <code>ng g @angular/core:standalone</code> and select \"Bootstrap the project using standalone APIs\"</p>\n\n</li>\n<li>\n<p translation-result=\"on\">运行任何静态分析（lint）和格式检查，修复任何故障，并提交结果</p><p translation-origin=\"off\">Run any linting and formatting checks, fix any failures, and commit the result</p>\n\n</li>\n</ol>\n<h2 id=\"after-the-migration\" translation-result=\"on\">迁移后<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#after-the-migration\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">After the migration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#after-the-migration\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">恭喜，你的应用程序已转换为独立应用程序 🎉。这些是你现在可能想要采取的一些可选的后续步骤：</p><p translation-origin=\"off\">Congratulations, your application has been converted to standalone 🎉. These are some optional follow-up steps you may want to take now:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">查找并删除任何剩余的 <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> 声明：由于<a href=\"guide/standalone-migration#remove-unnecessary-ngmodules\">“删除不必要的 NgModule”步骤</a>不能自动删除所有模块，你可能必须手动删除剩余的声明。</p><p translation-origin=\"off\">Find and remove any remaining <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> declarations: since the <a href=\"guide/standalone-migration#remove-unnecessary-ngmodules\">\"Remove unnecessary NgModules\" step</a> cannot remove all modules automatically, you may have to remove the remaining declarations manually.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">运行项目的单元测试并修复所有故障。</p><p translation-origin=\"off\">Run the project's unit tests and fix any failures.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果项目使用了自动格式化，则运行所有代码格式化程序。</p><p translation-origin=\"off\">Run any code formatters, if the project uses automatic formatting.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在你的项目中运行任何静态分析器（linter）并修复新警告。一些静态分析器支持 <code>--fix</code> 标志，可以自动解决一些警告。</p><p translation-origin=\"off\">Run any linters in your project and fix new warnings. Some linters support a <code>--fix</code> flag that may resolve so warnings automatically.</p>\n\n</li>\n</ul>\n<h2 id=\"migration-modes\" translation-result=\"on\">迁移模式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#migration-modes\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Migration modes<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#migration-modes\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">迁移有以下几个步骤：</p><p translation-origin=\"off\">The migration has the following modes:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">将声明转换为独立的。</p><p translation-origin=\"off\">Convert declarations to standalone.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">移除不必要的 NgModule。</p><p translation-origin=\"off\">Remove unnecessary NgModules.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">切换到独立的引导启动 API。</p><p translation-origin=\"off\">Switch to standalone bootstrapping API.\nYou should run these migrations in the order given.</p>\n\n</li>\n</ol>\n<p>你应该按照给定的顺序运行这些迁移。</p>\n<h3 id=\"convert-declarations-to-standalone\" translation-result=\"on\">将声明转换为独立的<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#convert-declarations-to-standalone\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Convert declarations to standalone<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#convert-declarations-to-standalone\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在这种模式下，迁移通过设置 <code>standalone: true</code> 并将依赖项添加到它们的 <code>imports</code> 数组来将所有组件、指令和管道转换为独立的。</p><p translation-origin=\"off\">In this mode, the migration converts all components, directives and pipes to standalone by setting <code>standalone: true</code> and adding dependencies to their <code>imports</code> array.</p>\n\n<div class=\"callout is-helpful\">\n<p translation-result=\"on\">在此步骤中，该原理图会忽略在此过程中引导组件的 NgModules，因为它们很可能是由 <code>bootstrapModule</code> 使用的根模块，而不是兼容独立的 <code><a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a></code>。该原理图会自动将这些声明转换为<a href=\"guide/standalone-migration#switch-to-standalone-bootstrapping-api\">\"独立引导 API\"</a> 步骤的一部分。</p><p translation-origin=\"off\">The schematic ignores NgModules which bootstrap a component during this step because they are likely root modules used by <code>bootstrapModule</code> rather than the standalone-compatible <code><a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a></code>. The schematic converts these declarations automatically as a part of the <a href=\"guide/standalone-migration#switch-to-standalone-bootstrapping-api\">\"Switch to standalone bootstrapping API\"</a> step.</p>\n\n</div>\n<p translation-result=\"on\"><strong>之前：</strong></p><p translation-origin=\"off\"><strong>Before:</strong></p>\n\n<code-example language=\"typescript\">\n// shared.module.ts\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [<a href=\"api/common/CommonModule\" class=\"code-anchor\">CommonModule</a>],\n  declarations: [GreeterComponent],\n  exports: [GreeterComponent]\n})\nexport class SharedModule {}\n</code-example>\n<code-example language=\"typescript\">\n// greeter.component.ts\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'greeter',\n  template: '&lt;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"showGreeting\"&gt;Hello&lt;/div&gt;',\n})\nexport class GreeterComponent {\n  showGreeting = true;\n}\n</code-example>\n<p translation-result=\"on\"><strong>之后：</strong></p><p translation-origin=\"off\"><strong>After:</strong></p>\n\n<code-example language=\"typescript\">\n// shared.module.ts\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [<a href=\"api/common/CommonModule\" class=\"code-anchor\">CommonModule</a>, GreeterComponent],\n  exports: [GreeterComponent]\n})\nexport class SharedModule {}\n</code-example>\n<code-example language=\"typescript\">\n// greeter.component.ts\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'greeter',\n  template: '&lt;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"showGreeting\"&gt;Hello&lt;/div&gt;',\n  standalone: true,\n  imports: [<a href=\"api/common/NgIf\" class=\"code-anchor\">NgIf</a>]\n})\nexport class GreeterComponent {\n  showGreeting = true;\n}\n</code-example>\n<h3 id=\"remove-unnecessary-ngmodules\" translation-result=\"on\">移除不必要的 NgModule<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#remove-unnecessary-ngmodules\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Remove unnecessary NgModules<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#remove-unnecessary-ngmodules\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在将所有声明都转换为独立声明后，就可以安全地删除许多 NgModule 了。此步骤会删除这类模块声明和尽可能多的相应引用。如果迁移无法自动删除引用，它就会留下以下 TODO 注释，以便你可以手动删除 NgModule：</p><p translation-origin=\"off\">After converting all declarations to standalone, many NgModules can be safely removed. This step deletes such module declarations and as many corresponding references as possible. If the migration cannot delete a reference automatically, it leaves the following TODO comment so that you can delete the NgModule manually:</p>\n\n<code-example language=\"typescript\">\n/* TODO(standalone-migration): clean up removed <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> reference manually */\n</code-example>\n<p translation-result=\"on\">如果该模块满足以下条件，则迁移器就认为该模块可以安全删除了：</p><p translation-origin=\"off\">The migration considers a module safe to remove if that module:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">没有 <code>declarations</code>。</p><p translation-origin=\"off\">Has no <code>declarations</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">没有 <code>providers</code>。</p><p translation-origin=\"off\">Has no <code>providers</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">没有 <code>bootstrap</code> 组件。</p><p translation-origin=\"off\">Has no <code>bootstrap</code> components.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">没有引用 <code><a href=\"api/core/ModuleWithProviders\" class=\"code-anchor\">ModuleWithProviders</a></code> 符号或无法删除的模块的 <code>imports</code>。</p><p translation-origin=\"off\">Has no <code>imports</code> that reference a <code><a href=\"api/core/ModuleWithProviders\" class=\"code-anchor\">ModuleWithProviders</a></code> symbol or a module that can't be removed.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">没有类成员。空构造函数将被忽略。</p><p translation-origin=\"off\">Has no class members. Empty constructors are ignored.</p>\n\n</li>\n</ul>\n<p translation-result=\"on\"><strong>之前：</strong></p><p translation-origin=\"off\"><strong>Before:</strong></p>\n\n<code-example language=\"typescript\">\n// importer.module.ts\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [FooComponent, BarPipe],\n  exports: [FooComponent, BarPipe]\n})\nexport class ImporterModule {}\n</code-example>\n<p translation-result=\"on\"><strong>之后：</strong></p><p translation-origin=\"off\"><strong>After:</strong></p>\n\n<code-example language=\"typescript\">\n// importer.module.ts\n// Does not exist!\n</code-example>\n<h3 id=\"switch-to-standalone-bootstrapping-api\" translation-result=\"on\">切换到独立的引导 API<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#switch-to-standalone-bootstrapping-api\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Switch to standalone bootstrapping API<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#switch-to-standalone-bootstrapping-api\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">此步骤将 <code>bootstrapModule</code> 的任何用法转换为新的、基于独立的 <code><a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a></code>。它还会将根组件切换为 <code>standalone: true</code> 并删除根 NgModule。如果根模块有任何 <code>providers</code> 或 <code>imports</code>，迁移会尝试将尽可能多的配置复制到新的引导程序调用中。</p><p translation-origin=\"off\">This step converts any usages of  <code>bootstrapModule</code> to the new, standalone-based <code><a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a></code>. It also switches the root component to <code>standalone: true</code> and deletes the root NgModule. If the root module has any <code>providers</code> or <code>imports</code>, the migration attempts to copy as much of this configuration as possible into the new bootstrap call.</p>\n\n<p translation-result=\"on\"><strong>之前：</strong></p><p translation-origin=\"off\"><strong>Before:</strong></p>\n\n<code-example language=\"typescript\">\n// ./app/app.module.ts\nimport { <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> } from '@angular/core';\nimport { AppComponent } from './app.component';\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  declarations: [AppComponent],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n</code-example>\n<code-example language=\"typescript\">\n// ./app/app.component.ts\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({ selector: 'app', template: 'hello' })\nexport class AppComponent {}\n</code-example>\n<code-example language=\"typescript\">\n// ./main.ts\nimport { <a href=\"api/platform-browser/platformBrowser\" class=\"code-anchor\">platformBrowser</a> } from '@angular/platform-browser';\nimport { AppModule } from './app/app.module';\n\n<a href=\"api/platform-browser/platformBrowser\" class=\"code-anchor\">platformBrowser</a>().bootstrapModule(AppModule).catch(e =&gt; console.error(e));\n</code-example>\n<p translation-result=\"on\"><strong>之后：</strong></p><p translation-origin=\"off\"><strong>After:</strong></p>\n\n<code-example language=\"typescript\">\n// ./app/app.module.ts\n// Does not exist!\n</code-example>\n<code-example language=\"typescript\">\n// ./app/app.component.ts\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({ selector: 'app', template: 'hello', standalone: true })\nexport class AppComponent {}\n</code-example>\n<code-example language=\"typescript\">\n// ./main.ts\nimport { <a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a> } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\n\n<a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a>(AppComponent).catch(e =&gt; console.error(e));\n</code-example>\n<h2 id=\"common-problems\" translation-result=\"on\">常见问题<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#common-problems\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Common problems<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#common-problems\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">一些可能阻止原理图正常工作的常见问题包括：</p><p translation-origin=\"off\">Some common problems that may prevent the schematic from working correctly include:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">编译错误 —— 如果项目有编译错误，Angular 就无法正确分析和迁移它。</p><p translation-origin=\"off\">Compilation errors - if the project has compilation errors, Angular cannot analyze and migrate it correctly.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">文件未包含在 tsconfig 中 —— 原理图通过分析项目的 <code>tsconfig.json</code> 文件来确定要迁移的文件。该原理图不会包括任何未被 tsconfig 捕获的文件。</p><p translation-origin=\"off\">Files not included in a tsconfig - the schematic determines which files to migrate by analyzing your project's <code>tsconfig.json</code> files. The schematic excludes any files not captured by a tsconfig.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">无法静态分析的代码 —— 原理图使用静态分析来理解你的代码并确定在哪里进行更改。迁移可能会跳过任何包含在构建时无法静态分析的元数据的类。</p><p translation-origin=\"off\">Code that cannot be statically analyzed - the schematic uses static analysis to understand your code and determine where to make changes. The migration may skip any classes with metadata that cannot be statically analyzed at build time.</p>\n\n</li>\n</ul>\n<h2 id=\"limitations\" translation-result=\"on\">限制<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#limitations\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Limitations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/standalone-migration#limitations\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">由于迁移的规模和复杂性，有一些情况是原理图无法处理的：</p><p translation-origin=\"off\">Due to the size and complexity of the migration, there are some cases that the schematic cannot handle:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">因为单元测试不是预先（AoT）编译的，所以在单元测试中往组件的 <code>imports</code> 中添加类可能不完全正确。</p><p translation-origin=\"off\">Because unit tests are not ahead-of-time (AoT) compiled, <code>imports</code> added to components in unit tests might not be entirely correct.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">该原理图依赖于对 Angular API 的直接调用。原理图无法识别围绕 Angular API 的自定义包装器。例如，如果你在那里定义了一个自定义的 <code>customConfigureTestModule</code> 函数来包装 <code>TestBed.configureTestingModule</code>，它声明的组件可能无法被识别。</p><p translation-origin=\"off\">The schematic relies on direct calls to Angular APIs. The schematic cannot recognize custom wrappers around Angular APIs. For example, if there you define a custom <code>customConfigureTestModule</code> function that wraps <code>TestBed.configureTestingModule</code>, components it declares may not be recognized.</p>\n\n</li>\n</ul>\n\n  <div class=\"reviewed\">最后复查时间：2/15/2023</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/common/CommonModule\n - api/common/NgIf\n - api/core/Component\n - api/core/ModuleWithProviders\n - api/core/NgModule\n - api/platform-browser/bootstrapApplication\n - api/platform-browser/platformBrowser\n - guide/schematics\n - guide/standalone-components\n - guide/standalone-migration#after-the-migration\n - guide/standalone-migration#common-problems\n - guide/standalone-migration#convert-declarations-to-standalone\n - guide/standalone-migration#limitations\n - guide/standalone-migration#migrate-an-existing-angular-project-to-standalone\n - guide/standalone-migration#migration-modes\n - guide/standalone-migration#migrations-steps\n - guide/standalone-migration#prerequisites\n - guide/standalone-migration#remove-unnecessary-ngmodules\n - guide/standalone-migration#schematic-options\n - guide/standalone-migration#switch-to-standalone-bootstrapping-api\n - guide/standalone-migration#切换到独立的引导-api\n - guide/standalone-migration#前提条件\n - guide/standalone-migration#原理图选项\n - guide/standalone-migration#将声明转换为独立的\n - guide/standalone-migration#将现有的-angular-项目迁移到独立项目\n - guide/standalone-migration#常见问题\n - guide/standalone-migration#移除不必要的-ngmodule\n - guide/standalone-migration#迁移后\n - guide/standalone-migration#迁移模式\n - guide/standalone-migration#迁移步骤\n - guide/standalone-migration#限制\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/standalone-migration.md?message=docs%3A%20请简述你的修改...\n-->"}